<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>Recursion - Microcourses</title>
    <link href="../../stylesheets/all.css" media="screen, print" rel="stylesheet" type="text/css" />
    <script src="../../javascripts/all.js" type="text/javascript"></script>
  </head>

  <body class="course courses courses_recursion courses_recursion_index">
    <div class="container">
      <div class="course-header">
        <h2 class="course-title">
          Recursion
        </h2>
        <a class="home-link" href="../../">Microcourses</a>
      </div>
      <div class="course-metadata">
        
          <div class="course-duration"><b>Duration:</b> 2 hours of mentoring</div>
        
        
          <div class="course-requirements"><b>Requirements:</b> pen and paper, ruby command, functions</div>
        
        
          <div class="course-concepts"><b>Concepts:</b> base case, recursive case</div>
        
      </div>

      <div class="course-body">
        <p>A <strong>recursive function</strong> is one that calls itself using its own name.
Today you will use such a function to build an ATM stocked with 50 and 20 dollar notes.
The algorithm you will implement is called <strong>backtracking</strong>.</p>

<p>These are the steps a backtracking search goes through to give somebody $70:</p>

<table><thead>
<tr>
<th>step</th>
<th>notes</th>
<th>remainder</th>
<th>solution?</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>-</td>
<td>70</td>
<td>no</td>
</tr>
<tr>
<td>2</td>
<td>50</td>
<td>20</td>
<td>no</td>
</tr>
<tr>
<td>3</td>
<td>50,20</td>
<td>0</td>
<td>yes</td>
</tr>
</tbody></table>

<p>These are the steps for $80:</p>

<table><thead>
<tr>
<th>step</th>
<th>notes</th>
<th>remainder</th>
<th>solution?</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>-</td>
<td>80</td>
<td>no</td>
</tr>
<tr>
<td>2</td>
<td>50</td>
<td>30</td>
<td>no</td>
</tr>
<tr>
<td>3</td>
<td>50,20</td>
<td>10</td>
<td>no</td>
</tr>
<tr>
<td>4</td>
<td>20</td>
<td>50</td>
<td>no</td>
</tr>
<tr>
<td>5</td>
<td>20,50</td>
<td>10</td>
<td>no</td>
</tr>
<tr>
<td>6</td>
<td>20,20</td>
<td>40</td>
<td>no</td>
</tr>
<tr>
<td>7</td>
<td>20,20,20</td>
<td>20</td>
<td>no</td>
</tr>
<tr>
<td>8</td>
<td>20,20,20,20</td>
<td>0</td>
<td>yes</td>
</tr>
</tbody></table>

<p>The code below is a partial solution with some passing tests and some failing
tests. Copy this code into a file named <code>atm.rb</code> and run it with the command
<code>ruby atm.rb -v</code>. Make all the tests pass!</p>
<pre class="highlight ruby">
<span class="k">def</span> <span class="nf">atm</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">number</span> <span class="o">&lt;=</span> <span class="mi">0</span>             <span class="c1"># no chance, buster (base case)</span>
    <span class="o">[]</span>
  <span class="k">elsif</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">20</span>
    <span class="o">[</span><span class="mi">20</span><span class="o">]</span>                     <span class="c1"># OK fine, one 20 dollar note (base case)</span>
  <span class="k">elsif</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">70</span>
    <span class="o">[</span><span class="mi">50</span><span class="o">]</span> <span class="o">+</span> <span class="n">atm</span><span class="p">(</span><span class="n">number</span> <span class="o">-</span> <span class="mi">50</span><span class="p">)</span>  <span class="c1"># a 50, plus whatever other notes (recursive case)</span>
  <span class="k">else</span>
    <span class="o">[]</span>                       <span class="c1"># not sure, what do you think?</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="nb">require</span> <span class="s1">'minitest/spec'</span>
<span class="nb">require</span> <span class="s1">'minitest/autorun'</span>

<span class="n">describe</span> <span class="s1">'atm'</span> <span class="k">do</span>
  <span class="o">[</span>
    <span class="o">[</span>   <span class="mi">0</span><span class="p">,</span> <span class="o">[]</span>               <span class="o">]</span><span class="p">,</span>
    <span class="o">[</span>  <span class="mi">70</span><span class="p">,</span> <span class="o">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="o">]</span>         <span class="o">]</span><span class="p">,</span>
    <span class="o">[</span>  <span class="mi">80</span><span class="p">,</span> <span class="o">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="o">]</span> <span class="o">]</span><span class="p">,</span>
    <span class="o">[</span> <span class="mi">100</span><span class="p">,</span> <span class="o">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="o">]</span>         <span class="o">]</span><span class="p">,</span>
    <span class="o">[</span> <span class="mi">101</span><span class="p">,</span> <span class="o">[]</span>               <span class="o">]</span><span class="p">,</span>
  <span class="o">]</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">input</span><span class="p">,</span> <span class="n">expected</span><span class="o">|</span>
    <span class="n">it</span> <span class="s2">&quot;should convert the number </span><span class="si">#{</span><span class="n">input</span><span class="si">}</span><span class="s2"> to </span><span class="si">#{</span><span class="n">expected</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
      <span class="n">atm</span><span class="p">(</span><span class="n">input</span><span class="p">).</span><span class="nf">must_equal</span> <span class="n">expected</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
      </div>

      
        <div class="course-challenge">
          <p><b>Challenge:</b> The (evil) government introduces 14 dollar notes. Update your program.</p>
        </div>
      
    </div>
    <script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-4659649-6', 'microcourses.info');
ga('send', 'pageview');
</script>

  </body>
</html>
